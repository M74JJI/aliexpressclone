{"version":3,"sources":["pages/Cart.js"],"names":["Cart","history","useSelector","state","cart","user","dispatch","useDispatch","getTotal","reduce","currentValue","nextValue","qty","price","toFixed","className","style","backgroundColor","length","Header","map","p","src","images","url","alt","title","substring","priceBefore","class","marginTop","onClick","e","preventDefault","addToWishlist","_id","token","then","res","console","log","data","toast","success","handleAddToWishlist","window","localStorage","getItem","JSON","parse","product","i","splice","setItem","stringify","type","payload","handleRemove","userCart","ok","push","catch","err","to","pathname","from"],"mappings":"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","file":"static/js/24.472bff2b.chunk.js","sourcesContent":["import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport '../styles/cart.css';\nimport ProductCardInCheckout from '../components/cards/ProductCardInCheckout';\nimport { addToWishlist, userCart } from '../functions/user';\nimport Header from '../components/nav/header/Header';\nimport { IoIosArrowForward } from 'react-icons/io';\nimport { RiHeart2Line, RiDeleteBinLine } from 'react-icons/ri';\nimport { toast } from 'react-toastify';\nconst Cart = ({ history }) => {\n    const { cart, user } = useSelector((state) => ({ ...state }));\n    const dispatch = useDispatch();\n\n    const getTotal = () => {\n        return cart\n            .reduce((currentValue, nextValue) => {\n                return currentValue + nextValue.qty * nextValue.price;\n            }, 0)\n            .toFixed(2);\n    };\n\n    const saveOrderToDb = () => {\n        // console.log(\"cart\", JSON.stringify(cart, null, 4));\n        userCart(cart, user.token)\n            .then((res) => {\n                console.log('CART POST RES', res);\n                if (res.data.ok) history.push('/checkout');\n            })\n            .catch((err) => console.log('cart save err', err));\n    };\n    const handleAddToWishlist = (p, e) => {\n        e.preventDefault();\n        addToWishlist(p._id, user.token).then((res) => {\n            console.log('ADDED TO WISHLIST', res.data);\n            toast.success('added to wishlist');\n            // history.push('/user/wishlist');\n        });\n    };\n    const saveCashOrderToDb = () => {\n        // console.log(\"cart\", JSON.stringify(cart, null, 4));\n        dispatch({\n            type: 'COD',\n            payload: true,\n        });\n        userCart(cart, user.token)\n            .then((res) => {\n                console.log('CART POST RES', res);\n                if (res.data.ok) history.push('/checkout');\n            })\n            .catch((err) => console.log('cart save err', err));\n    };\n\n    const showCartItems = () => (\n        <table className=\"table table-bordered\">\n            <thead className=\"thead-light\">\n                <tr>\n                    <th scope=\"col\">Image</th>\n                    <th scope=\"col\">Title</th>\n                    <th scope=\"col\">Price</th>\n                    <th scope=\"col\">Brand</th>\n                    <th scope=\"col\">Color</th>\n                    <th scope=\"col\">Quantity</th>\n                    <th scope=\"col\">Shipping</th>\n                    <th scope=\"col\">Remove</th>\n                </tr>\n            </thead>\n\n            {cart.map((p) => (\n                <ProductCardInCheckout key={p._id} p={p} />\n            ))}\n        </table>\n    );\n\n    const handleRemove = (p) => {\n        // console.log(p._id, \"to remove\");\n        let cart = [];\n\n        if (typeof window !== 'undefined') {\n            if (localStorage.getItem('cart')) {\n                cart = JSON.parse(localStorage.getItem('cart'));\n            }\n            // [1,2,3,4,5]\n            cart.map((product, i) => {\n                if (product._id === p._id) {\n                    cart.splice(i, 1);\n                }\n            });\n\n            localStorage.setItem('cart', JSON.stringify(cart));\n            dispatch({\n                type: 'ADD_TO_CART',\n                payload: cart,\n            });\n        }\n    };\n    return (\n        <div\n            className=\"cart-page\"\n            style={{ backgroundColor: cart.length > 0 ? '#e4e4e4' : '' }}\n        >\n            <Header />\n            <div className=\"cart-container\">\n                {cart.length ? (\n                    <>\n                        <div className=\"cart-left\">\n                            <div className=\"cart-left-title\">\n                                <h4>Shopping Cart({cart.length})</h4>\n                            </div>\n                            <div className=\"cart-items\">\n                                {!cart.length ? (\n                                    <p>No products in cart.</p>\n                                ) : (\n                                    cart.map((p) => (\n                                        <div className=\"cart-item\">\n                                            <div className=\"cart-header\">\n                                                <div className=\"cart-header-left\">\n                                                    <Link>\n                                                        SPLOV Official Store\n                                                    </Link>\n                                                </div>\n                                                <span>Get Coupons</span>\n                                            </div>\n\n                                            <div className=\"cart-product\">\n                                                <img\n                                                    src={p.images[0].url}\n                                                    alt=\"\"\n                                                />\n                                                <div className=\"cart-product-infos\">\n                                                    <div className=\"cart-product-title\">\n                                                        {p.title}\n                                                    </div>\n                                                    <div className=\"cart-product-color\">\n                                                        <span>Color : </span>\n                                                        <span>red</span>\n                                                    </div>\n                                                    <p>\n                                                        {p.title.substring(\n                                                            0,\n                                                            10\n                                                        )}\n                                                        ... x {p.qty} = $\n                                                        {p.price * p.qty}\n                                                    </p>\n                                                    <div className=\"cart-product-price\">\n                                                        US ${p.price}\n                                                    </div>\n                                                    <div className=\"cart-product-discount\">\n                                                        <span>\n                                                            US ${p.priceBefore}\n                                                        </span>\n                                                        <span>\n                                                            New User BONUS\n                                                        </span>\n                                                    </div>\n                                                    <div className=\"cart-product-shipping\">\n                                                        <span class=\"shippingfreeotNot \">\n                                                            Free Shipping\n                                                        </span>\n                                                        <span>\n                                                            via Cainiao Super\n                                                            Economy Global\n                                                            Estimated delivery\n                                                        </span>\n                                                        <IoIosArrowForward\n                                                            style={{\n                                                                marginTop:\n                                                                    '3px',\n                                                            }}\n                                                        />\n                                                    </div>\n                                                </div>\n                                                <div className=\"cart-product-operations\">\n                                                    <div className=\"cart-wishlist-delete\">\n                                                        <RiHeart2Line\n                                                            onClick={(e) =>\n                                                                handleAddToWishlist(\n                                                                    p,\n                                                                    e\n                                                                )\n                                                            }\n                                                        />\n                                                        <RiDeleteBinLine\n                                                            onClick={() =>\n                                                                handleRemove(p)\n                                                            }\n                                                        />\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    ))\n                                )}\n                            </div>\n                        </div>\n                        <div className=\"cart-right\">\n                            <div className=\"cart-summary\">\n                                <h2 className=\"cart-summary-title\">\n                                    Order Summary\n                                </h2>\n                                <div className=\"cart-subtotal-shipping\">\n                                    <span>Subtotal</span>\n                                    <span>US ${getTotal()}</span>\n                                </div>\n                                <div className=\"cart-subtotal-shipping\">\n                                    <span>Shipping</span>\n                                    <span>US $0.00</span>\n                                </div>\n                                <div className=\"cart-total\">\n                                    <span>Total</span>\n                                    <span>US ${getTotal()}</span>\n                                </div>\n                                {user && user.token ? (\n                                    <>\n                                        {' '}\n                                        <button\n                                            className=\"cart-btn\"\n                                            onClick={saveOrderToDb}\n                                        >\n                                            Buy\n                                        </button>\n                                        <button\n                                            className=\"cart-btn\"\n                                            onClick={saveCashOrderToDb}\n                                        >\n                                            Pay Cash on Delievery\n                                        </button>\n                                    </>\n                                ) : (\n                                    <Link\n                                        className=\"cart-link\"\n                                        to={{\n                                            pathname: '/login',\n                                            state: { from: 'cart' },\n                                        }}\n                                    >\n                                        Login to Checkout\n                                    </Link>\n                                )}\n                            </div>\n                        </div>\n                    </>\n                ) : (\n                    <div className=\"cart-empty\">\n                        <div className=\"cart-empty-logo\"></div>\n                        <h2>Your Shopping Cart is empty</h2>\n                        <p>\n                            <Link to=\"/shop\">\n                                Don't miss out on great deals! Start shopping\n                            </Link>\n                            or\n                            <Link>log in</Link> to view products added.\n                        </p>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n};\n\nexport default Cart;\n\n{\n    /*\n <div className=\"row\">\n                <div className=\"col-md-8\">\n                    <h4>Cart / {cart.length} Product</h4>\n\n                    {!cart.length ? (\n                        <p>\n                            No products in cart.{' '}\n                            <Link to=\"/shop\">Continue Shopping.</Link>\n                        </p>\n                    ) : (\n                        showCartItems()\n                    )}\n                </div>\n                <div className=\"col-md-4\">\n                    <h4>Order Summary</h4>\n                    <hr />\n                    <p>Products</p>\n                    {cart.map((c, i) => (\n                        <div key={i}>\n                            <p>\n                                {c.title} x {c.qty} = ${c.price * c.qty}\n                            </p>\n                        </div>\n                    ))}\n                    <hr />\n                    Total: <b>${getTotal()}</b>\n                    <hr />\n                    {user ? (\n                        <>\n                            <button\n                                onClick={saveOrderToDb}\n                                className=\"btn btn-sm btn-primary mt-2\"\n                                disabled={!cart.length}\n                            >\n                                Proceed to Checkout\n                            </button>\n                            <br />\n                            <button\n                                onClick={saveCashOrderToDb}\n                                className=\"btn btn-sm btn-warning mt-2\"\n                                disabled={!cart.length}\n                            >\n                                Pay Cash on Delivery\n                            </button>\n                        </>\n                    ) : (\n                        <button className=\"btn btn-sm btn-primary mt-2\">\n                            <Link\n                                to={{\n                                    pathname: '/login',\n                                    state: { from: 'cart' },\n                                }}\n                            >\n                                Login to Checkout\n                            </Link>\n                        </button>\n                    )}\n                </div>\n            </div>\n*/\n}\n"],"sourceRoot":""}