{"version":3,"sources":["pages/admin/product/AllProducts.js"],"names":["AllProducts","useState","products","setProducts","loading","setLoading","user","useSelector","state","useEffect","loadAllProducts","getProductsByCount","then","res","data","catch","err","console","log","handleRemove","slug","window","confirm","removeProduct","token","toast","error","title","response","status","className","map","product","key","_id"],"mappings":"wLA4EeA,UApEK,WAAO,IAAD,EACQC,mBAAS,IADjB,mBACjBC,EADiB,KACPC,EADO,OAEMF,oBAAS,GAFf,mBAEjBG,EAFiB,KAERC,EAFQ,KAIhBC,EAASC,aAAY,SAACC,GAAD,sBAAiBA,MAAtCF,KAERG,qBAAU,WACRC,MACC,IAEH,IAAMA,EAAkB,WACtBL,GAAW,GACXM,YAAmB,KAChBC,MAAK,SAACC,GACLV,EAAYU,EAAIC,MAChBT,GAAW,MAEZU,OAAM,SAACC,GACNX,GAAW,GACXY,QAAQC,IAAIF,OAIZG,EAAe,SAACC,GAEhBC,OAAOC,QAAQ,YAEjBC,YAAcH,EAAMd,EAAKkB,OACtBZ,MAAK,SAACC,GACLH,IACAe,IAAMC,MAAN,UAAeb,EAAIC,KAAKa,MAAxB,mBAEDZ,OAAM,SAACC,GACsB,MAAxBA,EAAIY,SAASC,QAAgBJ,IAAMC,MAAMV,EAAIY,SAASd,MAC1DG,QAAQC,IAAIF,OAKpB,OACE,yBAAKc,UAAU,mBACb,yBAAKA,UAAU,OACb,yBAAKA,UAAU,YACb,kBAAC,IAAD,OAGF,yBAAKA,UAAU,OACZ1B,EACC,wBAAI0B,UAAU,eAAd,cAEA,4CAEF,yBAAKA,UAAU,OACZ5B,EAAS6B,KAAI,SAACC,GAAD,OACZ,yBAAKC,IAAKD,EAAQE,IAAKJ,UAAU,iBAC/B,kBAAC,IAAD,CACEE,QAASA,EACTb,aAAcA","file":"static/js/38.8b0386f7.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport AdminNav from \"../../../components/nav/AdminNav\";\nimport { getProductsByCount } from \"../../../functions/product\";\nimport AdminProductCard from \"../../../components/cards/AdminProductCard\";\nimport { removeProduct } from \"../../../functions/product\";\nimport { useSelector } from \"react-redux\";\nimport { toast } from \"react-toastify\";\n\nconst AllProducts = () => {\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(false);\n  // redux\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    loadAllProducts();\n  }, []);\n\n  const loadAllProducts = () => {\n    setLoading(true);\n    getProductsByCount(100)\n      .then((res) => {\n        setProducts(res.data);\n        setLoading(false);\n      })\n      .catch((err) => {\n        setLoading(false);\n        console.log(err);\n      });\n  };\n\n  const handleRemove = (slug) => {\n    // let answer = window.confirm(\"Delete?\");\n    if (window.confirm(\"Delete?\")) {\n      // console.log(\"send delete request\", slug);\n      removeProduct(slug, user.token)\n        .then((res) => {\n          loadAllProducts();\n          toast.error(`${res.data.title} is deleted`);\n        })\n        .catch((err) => {\n          if (err.response.status === 400) toast.error(err.response.data);\n          console.log(err);\n        });\n    }\n  };\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <AdminNav />\n        </div>\n\n        <div className=\"col\">\n          {loading ? (\n            <h4 className=\"text-danger\">Loading...</h4>\n          ) : (\n            <h4>All Products</h4>\n          )}\n          <div className=\"row\">\n            {products.map((product) => (\n              <div key={product._id} className=\"col-md-4 pb-3\">\n                <AdminProductCard\n                  product={product}\n                  handleRemove={handleRemove}\n                />\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AllProducts;\n"],"sourceRoot":""}