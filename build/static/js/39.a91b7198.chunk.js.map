{"version":3,"sources":["pages/admin/product/ProductCreate.js"],"names":["initialState","title","description","price","categories","category","subs","shipping","quantity","images","colors","brands","color","brand","ProductCreate","useState","values","setValues","subOptions","setSubOptions","showSub","setShowSub","loading","setLoading","user","useSelector","state","useEffect","loadCategories","getCategories","then","c","data","className","handleSubmit","e","preventDefault","createProduct","token","res","console","log","window","alert","location","reload","catch","err","toast","error","response","handleChange","target","name","value","handleCatagoryChange","getCategorySubs"],"mappings":"yNAUMA,EAAe,CACnBC,MAAO,cACPC,YAAa,iCACbC,MAAO,QACPC,WAAY,GACZC,SAAU,GACVC,KAAM,GACNC,SAAU,MACVC,SAAU,KACVC,OAAQ,GAiBRC,OAAQ,CAAC,QAAS,QAAS,SAAU,QAAS,QAC9CC,OAAQ,CAAC,QAAS,UAAW,YAAa,SAAU,QACpDC,MAAO,QACPC,MAAO,SA0FMC,UAvFO,WAAO,IAAD,EACEC,mBAASf,GADX,mBACnBgB,EADmB,KACXC,EADW,OAEUF,mBAAS,IAFnB,mBAEnBG,EAFmB,KAEPC,EAFO,OAGIJ,oBAAS,GAHb,mBAGnBK,EAHmB,KAGVC,EAHU,OAIIN,oBAAS,GAJb,mBAInBO,EAJmB,KAIVC,EAJU,KAOlBC,EAASC,aAAY,SAACC,GAAD,sBAAiBA,MAAtCF,KAERG,qBAAU,WACRC,MACC,IAEH,IAAMA,EAAiB,kBACrBC,cAAgBC,MAAK,SAACC,GAAD,OAAOd,EAAU,2BAAKD,GAAN,IAAcZ,WAAY2B,EAAEC,YAiCnE,OACE,yBAAKC,UAAU,mBACb,yBAAKA,UAAU,OACb,yBAAKA,UAAU,YACb,kBAAC,IAAD,OAGF,yBAAKA,UAAU,aACZX,EACC,kBAAC,IAAD,CAAiBW,UAAU,mBAE3B,8CAEF,6BAIA,yBAAKA,UAAU,OACb,kBAAC,IAAD,CACEjB,OAAQA,EACRC,UAAWA,EACXM,WAAYA,KAIhB,kBAAC,IAAD,CACEW,aAzDW,SAACC,GACpBA,EAAEC,iBACFC,YAAcrB,EAAQQ,EAAKc,OACxBR,MAAK,SAACS,GACLC,QAAQC,IAAIF,GACZG,OAAOC,MAAP,WAAiBJ,EAAIP,KAAK/B,MAA1B,iBACAyC,OAAOE,SAASC,YAEjBC,OAAM,SAACC,GACNP,QAAQC,IAAIM,GAEZC,IAAMC,MAAMF,EAAIG,SAASlB,KAAKe,SA+C1BI,aA3CW,SAAChB,GACpBlB,EAAU,2BAAKD,GAAN,kBAAemB,EAAEiB,OAAOC,KAAOlB,EAAEiB,OAAOE,UA2CzCrC,UAAWA,EACXD,OAAQA,EACRuC,qBAzCmB,SAACpB,GAC5BA,EAAEC,iBACFI,QAAQC,IAAI,mBAAoBN,EAAEiB,OAAOE,OACzCrC,EAAU,2BAAKD,GAAN,IAAcV,KAAM,GAAID,SAAU8B,EAAEiB,OAAOE,SACpDE,YAAgBrB,EAAEiB,OAAOE,OAAOxB,MAAK,SAACS,GACpCC,QAAQC,IAAI,+BAAgCF,GAC5CpB,EAAcoB,EAAIP,SAEpBX,GAAW,IAkCHH,WAAYA,EACZE,QAASA","file":"static/js/39.a91b7198.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport AdminNav from \"../../../components/nav/AdminNav\";\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\nimport { createProduct } from \"../../../functions/product\";\nimport ProductCreateForm from \"../../../components/forms/ProductCreateForm\";\nimport { getCategories, getCategorySubs } from \"../../../functions/category\";\nimport FileUpload from \"../../../components/forms/FileUpload\";\nimport { LoadingOutlined } from \"@ant-design/icons\";\n\nconst initialState = {\n  title: \"Macbook Pro\",\n  description: \"This is the best Apple product\",\n  price: \"45000\",\n  categories: [],\n  category: \"\",\n  subs: [],\n  shipping: \"Yes\",\n  quantity: \"50\",\n  images: [\n    // {\n    //   public_id: \"jwrzeubemmypod99e8lz\",\n    //   url:\n    //     \"https://res.cloudinary.com/dcqjrwaoi/image/upload/v1599480909/jwrzeubemmypod99e8lz.jpg\",\n    // },\n    // {\n    //   public_id: \"j7uerlvhog1eic0oyize\",\n    //   url:\n    //     \"https://res.cloudinary.com/dcqjrwaoi/image/upload/v1599480912/j7uerlvhog1eic0oyize.jpg\",\n    // },\n    // {\n    //   public_id: \"ho6wnp7sugyemnmtoogf\",\n    //   url:\n    //     \"https://res.cloudinary.com/dcqjrwaoi/image/upload/v1599480913/ho6wnp7sugyemnmtoogf.jpg\",\n    // },\n  ],\n  colors: [\"Black\", \"Brown\", \"Silver\", \"White\", \"Blue\"],\n  brands: [\"Apple\", \"Samsung\", \"Microsoft\", \"Lenovo\", \"ASUS\"],\n  color: \"White\",\n  brand: \"Apple\",\n};\n\nconst ProductCreate = () => {\n  const [values, setValues] = useState(initialState);\n  const [subOptions, setSubOptions] = useState([]);\n  const [showSub, setShowSub] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  // redux\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    loadCategories();\n  }, []);\n\n  const loadCategories = () =>\n    getCategories().then((c) => setValues({ ...values, categories: c.data }));\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    createProduct(values, user.token)\n      .then((res) => {\n        console.log(res);\n        window.alert(`\"${res.data.title}\" is created`);\n        window.location.reload();\n      })\n      .catch((err) => {\n        console.log(err);\n        // if (err.response.status === 400) toast.error(err.response.data);\n        toast.error(err.response.data.err);\n      });\n  };\n\n  const handleChange = (e) => {\n    setValues({ ...values, [e.target.name]: e.target.value });\n    // console.log(e.target.name, \" ----- \", e.target.value);\n  };\n\n  const handleCatagoryChange = (e) => {\n    e.preventDefault();\n    console.log(\"CLICKED CATEGORY\", e.target.value);\n    setValues({ ...values, subs: [], category: e.target.value });\n    getCategorySubs(e.target.value).then((res) => {\n      console.log(\"SUB OPTIONS ON CATGORY CLICK\", res);\n      setSubOptions(res.data);\n    });\n    setShowSub(true);\n  };\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <AdminNav />\n        </div>\n\n        <div className=\"col-md-10\">\n          {loading ? (\n            <LoadingOutlined className=\"text-danger h1\" />\n          ) : (\n            <h4>Product create</h4>\n          )}\n          <hr />\n\n          {/* {JSON.stringify(values.images)} */}\n\n          <div className=\"p-3\">\n            <FileUpload\n              values={values}\n              setValues={setValues}\n              setLoading={setLoading}\n            />\n          </div>\n\n          <ProductCreateForm\n            handleSubmit={handleSubmit}\n            handleChange={handleChange}\n            setValues={setValues}\n            values={values}\n            handleCatagoryChange={handleCatagoryChange}\n            subOptions={subOptions}\n            showSub={showSub}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProductCreate;\n"],"sourceRoot":""}