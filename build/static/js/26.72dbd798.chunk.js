(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[26],{1109:function(e,t,a){"use strict";a.r(t);var n=a(8),r=a.n(n),c=a(15),o=a(12),s=a(5),l=a(1),i=a.n(l),u=a(176),m=a(16),p=a(10),d=a(2),g=a(111);a(464);t.default=function(e){var t=e.history,a=Object(l.useState)(""),n=Object(s.a)(a,2),b=n[0],f=n[1],h=Object(l.useState)(""),E=Object(s.a)(h,2),v=E[0],k=E[1],O=Object(l.useState)(!1),j=Object(s.a)(O,2),w=(j[0],j[1]),y=Object(l.useState)(!0),N=Object(s.a)(y,2),S=N[0],R=N[1],I=Object(l.useState)(!1),x=Object(s.a)(I,2),C=x[0],A=x[1],_=Object(l.useState)(!1),L=Object(s.a)(_,2),P=(L[0],L[1]),T=Object(p.c)((function(e){return Object(o.a)({},e)})).user,G=t.location.state;Object(l.useEffect)((function(){G||T&&T.token&&t.push("/")}),[T,t]);var D=Object(p.b)(),F=function(e){G?t.push(G.from):"admin"===e.data.role?t.push("/admin/dashboard"):t.push("/user/history")},U=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.a.signInWithPopup(u.b).then(function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.user,e.next=3,a.getIdTokenResult();case 3:n=e.sent,Object(g.a)(n.token).then((function(e){D({type:"LOGGED_IN_USER",payload:{name:e.data.name,email:e.data.email,token:n.token,role:e.data.role,_id:e.data._id,hasStore:e.data.hasStore,sentApp:e.data.sentApp}}),F(e)})).catch((function(e){return console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),m.b.error(e.message)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n,c,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),w(!0),!S){e.next=21;break}return e.prev=3,e.next=6,u.a.signInWithEmailAndPassword(b,v);case 6:return a=e.sent,n=a.user,e.next=10,n.getIdTokenResult();case 10:c=e.sent,Object(g.a)(c.token).then((function(e){D({type:"LOGGED_IN_USER",payload:{name:e.data.name,email:e.data.email,token:c.token,role:e.data.role,_id:e.data._id,hasStore:e.data.hasStore,sentApp:e.data.sentApp}}),P(!1),F(e)})).catch((function(e){return console.log(e)})),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0),m.b.error(e.t0.message),w(!1);case 19:e.next=28;break;case 21:return b||m.b.error("Please Enter Your Email"),o={url:"http://localhost:3000/register/complete",handleCodeInApp:!0},e.next=25,u.a.sendSignInLinkToEmail(b,o);case 25:m.b.success("Email is sent to ".concat(b,". Click the link to complete your registration.")),window.localStorage.setItem("emailForRegistration",b),f("");case 28:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement("div",{className:"logRegModal"},i.a.createElement("div",{className:"logRegModal-container"},i.a.createElement("div",{className:"logReg-logo"}),i.a.createElement("ul",null,i.a.createElement("li",{onClick:function(){P(!0),A(!0),R(!1)}},"Register"),i.a.createElement("div",{className:C?"selectedLine1 w100":"selectedLine1"}),i.a.createElement("li",{onClick:function(){P(!0),R(!0),A(!1)}},"Sign In"),i.a.createElement("div",{className:S?"selectedLine2 w100":"selectedLine2"})),i.a.createElement("div",{className:"logReg-form"},i.a.createElement("form",{onSubmit:M},C&&i.a.createElement("div",{className:"benifits"},i.a.createElement("span",null),i.a.createElement("span",null,"Register now to get $3 New User Coupon.")),i.a.createElement("input",{type:"email",value:b,onChange:function(e){return f(e.target.value)},autoFocus:!0,placeholder:S?"Email address or member ID":"Email address"}),S&&i.a.createElement("input",{type:"password",placeholder:"Password",value:v,onChange:function(e){return k(e.target.value)}}),i.a.createElement("button",{onClick:M},C?"CREATE ACCOUNT":"SIGN IN")," ",S&&i.a.createElement(d.b,{to:"/forgot_password"},"Forget Password?"))),i.a.createElement("div",{className:"logReg-quick"},i.a.createElement("span",null,"By creating an account, you agree to the"),i.a.createElement("div",{className:"logReg-privacy"},i.a.createElement(d.b,null,"AliExpress.com Free Membership Agreement "),"\xa0",i.a.createElement("span",null,"and"),"\xa0",i.a.createElement(d.b,null,"Privacy Policy")),i.a.createElement("span",{className:"logReg-quickText"},"Quick access with"),i.a.createElement("button",{className:"google",onClick:U}))))}},464:function(e,t,a){}}]);
//# sourceMappingURL=26.72dbd798.chunk.js.map