(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[28],{1112:function(e,t,a){"use strict";a.r(t);var r=a(8),n=a.n(r),o=a(15),l=a(5),s=a(1),c=a.n(s),i=a(176),u=a(16),d=a(10),m=a(111);a(464);t.default=function(e){var t=e.history,a=Object(s.useState)(""),r=Object(l.a)(a,2),g=r[0],p=r[1],b=Object(s.useState)(""),f=Object(l.a)(b,2),h=f[0],v=f[1],E=Object(d.b)();Object(s.useEffect)((function(){p(window.localStorage.getItem("emailForRegistration"))}),[t]);var w=function(){var e=Object(o.a)(n.a.mark((function e(a){var r,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),g&&h){e.next=4;break}return u.b.error("Email and password is required"),e.abrupt("return");case 4:if(!(h.length<6)){e.next=7;break}return u.b.error("Password must be at least 6 characters long"),e.abrupt("return");case 7:return e.prev=7,e.next=10,i.a.signInWithEmailLink(g,window.location.href);case 10:if(!e.sent.user.emailVerified){e.next=22;break}return window.localStorage.removeItem("emailForRegistration"),r=i.a.currentUser,e.next=16,r.updatePassword(h);case 16:return e.next=18,r.getIdTokenResult();case 18:o=e.sent,console.log("user",r,"idTokenResult",o),Object(m.a)(o.token).then((function(e){E({type:"LOGGED_IN_USER",payload:{name:e.data.name,email:e.data.email,token:o.token,role:e.data.role,_id:e.data._id}})})).catch((function(e){return console.log(e)})),t.push("/");case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(7),console.log(e.t0),u.b.error(e.t0.message);case 28:case"end":return e.stop()}}),e,null,[[7,24]])})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"logRegModal"},c.a.createElement("div",{className:"logRegModal-container"},c.a.createElement("div",{className:"logReg-logo"}),c.a.createElement("ul",null,c.a.createElement("li",{style:{marginRight:"5rem"}},"Rest your password")),c.a.createElement("div",{className:"logReg-form"},c.a.createElement("form",{onSubmit:w},c.a.createElement("input",{type:"email",value:g,onChange:function(e){return p(e.target.value)},autoFocus:!0,placeholder:"Email Address"})," ",c.a.createElement("input",{type:"password",value:h,onChange:function(e){return v(e.target.value)},placeholder:"Password",autoFocus:!0}),c.a.createElement("button",{onClick:w,disabled:!g},"Send Email")))))}},464:function(e,t,a){}}]);
//# sourceMappingURL=28.60b320ee.chunk.js.map